<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="/admin/pages/css/addcourses.css">
</head>
<body>

    <form action="/admin/courses/update" method="post" enctype="multipart/form-data">
    <label for="name">Course Title:</label>
    <input type="text" id="name" name="name" required>
    <label for="price">Course Price:</label>
    <input type="number" id="price" name="price" required>
    <label for="oldPrice">Course old Price:</label>
    <input type="number" id="oldPrice" name="oldPrice" required>
    <label for="duration">Course Duration:</label>
    <input type="text" id="duration" name="duration" required>
    <label for="id">current Course image:</label>
    <img id="currentImage" alt="">
    <label for="image">Course Image:</label>
    <input type="file" id="image" name="img" accept="image/*" >
    <label for="tag">Course Tag:</label>
    <input type="text" id="tag" name="tag" required>
    <label for="desc">Course Description:</label>
    <textarea id="desc" name="desc" required></textarea>
    <label for="points">Course Points:</label>
    <textarea id="points" name="points" placeholder="html & css, javascript, react, nodejs, mongodb" required></textarea>
    <input type="hidden" id="id" name="id" required>
    <button type="submit">update Course</button>
  </form>

  <script>
    const urlParams = new URLSearchParams(window.location.search)
    const id = urlParams.get("id")

    async function fetchCourse(id){
      const response = await fetch(`/admin/courses/data/${id}`)
      const course = await response.json()
      document.getElementById("name").value = course.name
      document.getElementById("price").value = course.price
      document.getElementById("oldPrice").value = course.oldPrice
      document.getElementById("duration").value = course.duration
      document.getElementById("tag").value = course.tag
      document.getElementById("desc").value = course.desc
      document.getElementById("points").value = course.points.join(", ")
      document.getElementById("currentImage").src = `../../uploads/${course.img}`
      document.getElementById("id").value = course._id
    }

     fetchCourse(id)
  </script>

</body>
</html>